@model List<TbReserva>
@{
    var lab = ViewBag.Lab;
    DateTime fecha = ViewBag.fecha;
    int mes = ViewBag.mes;
    int año = ViewBag.año;
    int dia = ViewBag.dia;
    int x = 0;
    string[,,] semana = new String[14,8,2];
    DateTime primerdia=fecha.AddDays(-(byte)fecha.DayOfWeek + 1)
    , ultimodia=fecha.AddDays(6 - (byte)fecha.DayOfWeek);
    string pmodulo,pmodulo2;
    string pcurso, pdocente;
    for (int i = 0; i <= 13; i++)
    {
        for (int j = 0; j < 6; j++)
        {
            semana[i, j,1] = null;
            semana[i, j,0] = null;
        }
    }
}
<div class="card">
        <div class="card-header">
           <h4 style="text-align:center">Reservas</h4>
           <form  asp-controller="Reserva" method="get" asp-action="Index">
                <input id="dia" name="dia" type="hidden" value=@dia>
                <input id="mes" name="mes" type="hidden" value=@mes>
                <input id="año" name="año" type="hidden" value=@año>
                
                <div class="container">
                    <div class="row">
                      <div class="col-sm-4" style="padding-top:5px; padding-left:25px">
                        <button type="submit" id="x" name="x" value="-7"  style="background:none;border:none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-left-fill" viewBox="0 0 16 16">
                                    <path d="m3.86 8.753 5.482 4.796c.646.566 1.658.106 1.658-.753V3.204a1 1 0 0 0-1.659-.753l-5.48 4.796a1 1 0 0 0 0 1.506z"/>
                                    </svg>
                        </button>
                        @primerdia.ToShortDateString() - @ultimodia.ToShortDateString()
                        <button id="x" name="x" value="7" type="submit" style="background:none;border:none;"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-caret-right-fill" viewBox="0 0 16 16">
                                    <path d="m12.14 8.753-5.482 4.796c-.646.566-1.658.106-1.658-.753V3.204a1 1 0 0 1 1.659-.753l5.48 4.796a1 1 0 0 1 0 1.506z"/>
                                    </svg>
                        </button>
                      </div>
                      <div class="col-sm-4">
                        <div class="form-group" >
                            <select class="form-control" asp-for="@lab" asp-items="ViewBag.Laboratorios"><option selected disabled>--Seleccionar--</option></select>
                            <span class="text-danger"></span>
                        </div>
                      </div>
                      <div class="col-sm-4" style="padding-left:100px">
                        <div class="form-group">
                            <input type="submit" class="btn btn-primary" asp-route-lab="@lab"value="Buscar"/>
                        </div>
                      </div>
                </div>
            </form>
        </div>
        <div class="card-body" style="padding:25px">
            <table class="table table-bordered border-black">
                <thead>
                    <tr style="text-align:center">
                        <th>Modulo</th>
                        <th>Lunes</th>
                        <th>Martes</th>
                        <th>Miercoles</th>
                        <th>Jueves</th>
                        <th>Viernes</th>
                        <th>Sabado</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in (List<TbModulo>)ViewBag.Modulos)
                    {
                        semana[item.IdModulo, 0,0] = Convert.ToString(item.InicioMod);
                        semana[item.IdModulo, 0,1] = Convert.ToString(item.FinMod);
                    }

                    @foreach (var item in (List<TbReserva>)ViewBag.reservas)
                    {
                        semana[item.IdModulo, (byte)item.FechaReserva.DayOfWeek,0] = item.Curso;
                        semana[item.IdModulo, (byte)item.FechaReserva.DayOfWeek,1] = item.Docente;
                    }
                     @for (int i = 1; i <= 13; i++)
                    { 
                        pmodulo = semana[i, 0,0];
                        pmodulo2 = semana[i, 0,1];
                        <tr style="text-align:center">
                           <th >@Html.DisplayFor(m=>pmodulo)<br>@Html.DisplayFor(m=>pmodulo2)</th>
                           @for(int j=1;j<=6; j++)
                           {
                               pcurso = semana[i, j,0];
                               pdocente = semana[i, j,1];
                               if (pdocente !=null && pcurso != null)
                                {
                                    <td><button class="btn btn-color:blue boxed-action" id="delete-dialogo">@pcurso <br /> @pdocente</button></td>
                                }
                                else
                                {
                                    <td><button class="btn btn-color:grey boxed-action" id="delete2-dialogo">Disponible</button></td>
                                }
                              
                           }   

                         </tr>
                    }  
                    <dialog id="confirm-dialogo" class="site-dialogo" style="animation:reverse; border:none">
                                  <header class="dialog-header">
                                    <h4 style="text-align:center">Ingresar Reservas</h4>
                                  </header>
                                     <div class="dialog-content ">
                                         <form>
                                               <div class="row">
                                                   <div class="col-md-4">
                                                           <div asp-validation-summary="ModelOnly"class="text-danger"></div>
                                                           <div class="form-group">
                                                               <label id="NombreLab"  class="control-label">Docente</label>
                                                               <input name="NombreLab" class="form-control"/>
                                                           </div>
                                                            <div class="form-group">
                                                                
                                                               <label id="DescripcionLab" class="control-label">Curso</label>
                                                               <input name="DescripcionLab" class="form-control"/>
                                                           </div>
                                                            <div class="form-group">
                                                               <label id="CapacidadLab" class="control-label">Hasta</label>
                                                               <input name="CapacidadLab" class="form-control" type="date"/>
                                                           </div>
                                                   </div>
                                               </div>
                                         </form>
                                       <p>            Todo esto puede ser un FORM que llama a un guardar() como metodo en el controler</p>
                                     </div>
                                     <div class="btn-group cf">
                                       <button class="btn btn-primary" id="Guardar">Guardar</button>
                                       <button class="btn btn-danger" id="Cancelar">Cancelar</button>

                                     </div>
                                </dialog> 
                </tbody>
            </table>
       </div>
</div>